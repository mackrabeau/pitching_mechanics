<mujoco model="PitcherFullBody">
  <compiler angle="radian"/>
  <option timestep="0.001" gravity="0 0 -9.81" integrator="Euler"/>

  <default>
    <joint type="hinge" damping="5.0" limited="true"/>
    <position kp="80" kv="8"/>
    <geom type="capsule" density="500"/>
    <site size="0.018" rgba="0 0.8 0.8 1"/>
  </default>

  <worldbody>
    <light pos="1 0 3" dir="0 0 -1" directional="true"/>
    <geom name="floor" type="plane" size="5 5 0.1" rgba="0.25 0.3 0.35 1" condim="3"/>

    <!-- Mocap target for pelvis (kinematic root, invisible) -->
    <body name="pelvis_target" mocap="true" pos="0 0 1">
      <geom type="sphere" size="0.001" contype="0" conaffinity="0" rgba="0 0 0 0"/>
    </body>

    <body name="pelvis" pos="0 0 1">
      <freejoint name="root"/>
      <site name="pelvis_site" pos="0 0 0"/>
      <geom name="pelvis_geom" type="sphere" size="0.10" rgba="0.85 0.75 0.55 1"/>

      <!-- ═══════════ TORSO + ARMS ═══════════ -->
      <body name="torso" pos="0 0 0">
        <joint name="trunk_yaw"   axis="0 0 1" range="-3.14 3.14"/>
        <joint name="trunk_pitch" axis="0 1 0" range="-2.5 2.5"/>
        <joint name="trunk_roll"  axis="1 0 0" range="-2.5 2.5"/>
        <geom name="torso_geom" fromto="0 0 0  -0.136730 -0.144815 0.521872" size="0.08" rgba="0.75 0.22 0.22 1"/>
        <geom name="torso_geom2" fromto="0 0 0  0.020841 0.079968 0.589530" size="0.08" rgba="0.75 0.22 0.22 1"/>

        <!-- Throwing arm -->
        <body name="throw_upper_arm" pos="-0.136730 -0.144815 0.521872">
          <site name="throw_shoulder_site" pos="0 0 0"/>
          <joint name="throw_shoulder_yaw"   axis="0 0 1" range="-3.14 3.14"/>
          <joint name="throw_shoulder_pitch" axis="0 1 0" range="-3.14 3.14"/>
          <joint name="throw_shoulder_roll"  axis="1 0 0" range="-3.14 3.14"/>
          <geom name="throw_upper_geom" fromto="0 0 0  0.304182 0 0" size="0.045" rgba="0.85 0.30 0.30 1"/>

          <body name="throw_forearm" pos="0.304182 0 0">
            <site name="throw_elbow_site" pos="0 0 0"/>
            <joint name="throw_elbow_flex" axis="0 1 0" range="-3.14 0.2"/>
            <geom name="throw_fore_geom" fromto="0 0 0  0.323989 0 0" size="0.038" rgba="0.85 0.30 0.30 1"/>

            <body name="throw_hand" pos="0.323989 0 0">
              <site name="throw_hand_site" pos="0 0 0"/>
              <geom name="throw_hand_geom" type="sphere" size="0.04" rgba="0.95 0.85 0.2 1"/>
              <!-- Baseball (visual, attached to hand) -->
              <geom name="ball_geom" type="sphere" size="0.0365" pos="0.05 0 0"
                    rgba="1.0 1.0 1.0 1" mass="0.145" contype="0" conaffinity="0"/>
              <site name="ball_site" pos="0.05 0 0"/>
            </body>
          </body>
        </body>

        <!-- Glove arm -->
        <body name="glove_upper_arm" pos="0.020841 0.079968 0.589530">
          <site name="glove_shoulder_site" pos="0 0 0"/>
          <joint name="glove_shoulder_yaw"   axis="0 0 1" range="-3.14 3.14"/>
          <joint name="glove_shoulder_pitch" axis="0 1 0" range="-3.14 3.14"/>
          <joint name="glove_shoulder_roll"  axis="1 0 0" range="-3.14 3.14"/>
          <geom name="glove_upper_geom" fromto="0 0 0  0.323337 0 0" size="0.045" rgba="0.30 0.40 0.85 1"/>

          <body name="glove_forearm" pos="0.323337 0 0">
            <site name="glove_elbow_site" pos="0 0 0"/>
            <joint name="glove_elbow_flex" axis="0 1 0" range="-3.14 0.2"/>
            <geom name="glove_fore_geom" fromto="0 0 0  0.321395 0 0" size="0.038" rgba="0.30 0.40 0.85 1"/>

            <body name="glove_hand" pos="0.321395 0 0">
              <site name="glove_hand_site" pos="0 0 0"/>
              <geom name="glove_hand_geom" type="sphere" size="0.04" rgba="0.30 0.40 0.85 1"/>
            </body>
          </body>
        </body>
      </body>

      <!-- ═══════════ REAR LEG ═══════════ -->
      <body name="rear_thigh" pos="0.000000 -0.150267 -0.000000">
        <site name="rear_hip_site" pos="0 0 0"/>
        <joint name="rear_hip_yaw"   axis="0 0 1" range="-3.14 3.14"/>
        <joint name="rear_hip_pitch" axis="0 1 0" range="-3.14 3.14"/>
        <joint name="rear_hip_roll"  axis="1 0 0" range="-3.14 3.14"/>
        <geom name="rear_thigh_geom" fromto="0 0 0  0 0 -0.363788" size="0.06" rgba="0.25 0.6 0.35 1"/>

        <body name="rear_shin" pos="0 0 -0.363788">
          <site name="rear_knee_site" pos="0 0 0"/>
          <joint name="rear_knee_flex" axis="0 1 0" range="-0.1 3.14"/>
          <geom name="rear_shin_geom" fromto="0 0 0  0 0 -0.427443" size="0.05" rgba="0.25 0.6 0.35 1"/>

          <body name="rear_foot" pos="0 0 -0.427443">
            <site name="rear_ankle_site" pos="0 0 0"/>
            <joint name="rear_ankle_flex" axis="0 1 0" range="-1.5 1.5"/>
            <geom name="rear_foot_geom" fromto="0 0 0  0.15 0 0" size="0.04" rgba="0.25 0.6 0.35 1"/>
          </body>
        </body>
      </body>

      <!-- ═══════════ LEAD LEG ═══════════ -->
      <body name="lead_thigh" pos="-0.000000 0.150267 -0.000000">
        <site name="lead_hip_site" pos="0 0 0"/>
        <joint name="lead_hip_yaw"   axis="0 0 1" range="-3.14 3.14"/>
        <joint name="lead_hip_pitch" axis="0 1 0" range="-3.14 3.14"/>
        <joint name="lead_hip_roll"  axis="1 0 0" range="-3.14 3.14"/>
        <geom name="lead_thigh_geom" fromto="0 0 0  0 0 -0.383317" size="0.06" rgba="0.20 0.55 0.30 1"/>

        <body name="lead_shin" pos="0 0 -0.383317">
          <site name="lead_knee_site" pos="0 0 0"/>
          <joint name="lead_knee_flex" axis="0 1 0" range="-0.1 3.14"/>
          <geom name="lead_shin_geom" fromto="0 0 0  0 0 -0.412274" size="0.05" rgba="0.20 0.55 0.30 1"/>

          <body name="lead_foot" pos="0 0 -0.412274">
            <site name="lead_ankle_site" pos="0 0 0"/>
            <joint name="lead_ankle_flex" axis="0 1 0" range="-1.5 1.5"/>
            <geom name="lead_foot_geom" fromto="0 0 0  0.15 0 0" size="0.04" rgba="0.20 0.55 0.30 1"/>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <!-- trunk (heavy body, high gains) -->
    <position name="trunk_yaw"   joint="trunk_yaw"   kp="500" kv="50"/>
    <position name="trunk_pitch" joint="trunk_pitch" kp="500" kv="50"/>
    <position name="trunk_roll"  joint="trunk_roll"  kp="500" kv="50"/>
    <!-- throw arm (fast movements, needs stiff tracking) -->
    <position name="throw_shoulder_yaw"   joint="throw_shoulder_yaw"   kp="300" kv="30"/>
    <position name="throw_shoulder_pitch" joint="throw_shoulder_pitch" kp="300" kv="30"/>
    <position name="throw_shoulder_roll"  joint="throw_shoulder_roll"  kp="300" kv="30"/>
    <position name="throw_elbow_flex"     joint="throw_elbow_flex"     kp="300" kv="30"/>
    <!-- glove arm -->
    <position name="glove_shoulder_yaw"   joint="glove_shoulder_yaw"   kp="200" kv="20"/>
    <position name="glove_shoulder_pitch" joint="glove_shoulder_pitch" kp="200" kv="20"/>
    <position name="glove_shoulder_roll"  joint="glove_shoulder_roll"  kp="200" kv="20"/>
    <position name="glove_elbow_flex"     joint="glove_elbow_flex"     kp="200" kv="20"/>
    <!-- rear leg (push-off, high force) -->
    <position name="rear_hip_yaw"    joint="rear_hip_yaw"    kp="400" kv="40"/>
    <position name="rear_hip_pitch"  joint="rear_hip_pitch"  kp="400" kv="40"/>
    <position name="rear_hip_roll"   joint="rear_hip_roll"   kp="400" kv="40"/>
    <position name="rear_knee_flex"  joint="rear_knee_flex"  kp="400" kv="40"/>
    <position name="rear_ankle_flex" joint="rear_ankle_flex" kp="200" kv="20"/>
    <!-- lead leg (landing, high force) -->
    <position name="lead_hip_yaw"    joint="lead_hip_yaw"    kp="400" kv="40"/>
    <position name="lead_hip_pitch"  joint="lead_hip_pitch"  kp="400" kv="40"/>
    <position name="lead_hip_roll"   joint="lead_hip_roll"   kp="400" kv="40"/>
    <position name="lead_knee_flex"  joint="lead_knee_flex"  kp="400" kv="40"/>
    <position name="lead_ankle_flex" joint="lead_ankle_flex" kp="200" kv="20"/>
  </actuator>

  <equality>
    <!-- Weld pelvis to mocap target — very stiff spring for RL root tracking -->
    <weld body1="pelvis_target" body2="pelvis"
          solref="0.01 1" solimp="0.95 0.99 0.001"/>
  </equality>
</mujoco>
